version: '3.6'

volumes:
  agent01_data: {}
  agent02_data: {}

networks:
  jenkins_net:
    driver: bridge
    ipam:
      config:
        - subnet: 12.0.1.0/24

services:
  agent01:
    image: jenkins/inbound-agent:alpine-jdk11
    hostname: Agent01
    user: root
    environment:
      TZ: Asia/Shanghai
      JENKINS_URL: http://12.0.0.5:8080/
      JENKINS_AGENT_NAME: Agent01
      JENKINS_AGENT_WORKDIR: /home/jenkins/agent
      JENKINS_SECRET: fe2f56728fa7a3b88fba9ca0e189c98d241baccd8fce320f72d34c94fdc0c893
      # SECRET is automatically generated by the master when adding agent01.
    volumes:
      - agent01_data:/appdata/jenkins/
    networks:
      jenkins_net:
        ipv4_address: 12.0.1.51
        aliases:
          - slave01
          - agent01
    #extra_hosts:
    #  - "jenkins.magedu.com:172.29.7.7"
    #restart: always

  agent02:
    image: jenkins/inbound-agent:alpine-jdk11
    hostname: Agent02
    user: root
    environment:
      TZ: Asia/Shanghai
      JENKINS_URL: http://12.0.0.5:8080/
      JENKINS_AGENT_NAME: Agent02
      JENKINS_AGENT_WORKDIR: /home/jenkins/agent
      JENKINS_SECRET: 0c078d57ecdc6a89079065f61570342be7d80cbf125dfe415336f6f565dc1bec
      # SECRET is automatically generated by the master when adding agent02.
    volumes:
      - agent02_data:/appdata/jenkins/
    networks:
      jenkins_net:
        ipv4_address: 12.0.1.52
        aliases:
          - slave02
          - agent02
    #extra_hosts:
    #  - "jenkins.magedu.com:172.29.7.7"
    #restart: always
